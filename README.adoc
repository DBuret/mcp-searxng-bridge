= MCP SearXNG Rust Bridge
David <your-email@example.com>
v0.2.0
:description: A high-performance, network-ready MCP server bridge for SearXNG.
:icons: font
:toc: macro
:toc-title: Table of Contents

image:https://img.shields.io/badge/Rust-2024-orange.svg[Rust Version]
image:https://img.shields.io/badge/License-MIT-blue.svg[License]
image:https://img.shields.io/badge/Protocol-MCP-green.svg[MCP]

An implementation of the **Model Context Protocol (MCP)** that allows AI agents (like Claude Desktop) to perform web searches using a **SearXNG** instance. 

Unlike standard MCP servers that communicate via `stdio`, this bridge operates over **SSE (Server-Sent Events)**, allowing it to be hosted on a remote server, NAS, or Docker container.

toc::[]

== Why this Bridge?

Most MCP servers are limited to local execution via standard I/O. This bridge was specifically created to support:

* **Remote Deployment**: Run the bridge on a dedicated server (NAS, VPS) while your AI client runs on your workstation.
* **Decoupled Architecture**: No need to manage local child processes or path-specific configurations in your AI client.
* **Concurrency**: Powered by `Axum` and `Tokio`, it provides a non-blocking, asynchronous environment for search operations.
* **Observability**: Includes structured, Syslog-compliant logs with backend latency tracking.

== Architecture

The bridge acts as a network middleware between the MCP Client and your SearXNG instance:



== Installation

=== Prerequisites
* Rust (latest stable)
* A running SearXNG instance (accessible via HTTP)

=== Build
[source,bash]
----
cargo build --release
----
The binary will be located at `target/release/mcp-searxng-rs`.

== Configuration

Configuration is handled via environment variables (prefix `MCP_SX_`):

[cols="1,2,1"]
|===
| Variable | Description | Default

| `MCP_SX_URL`
| URL of your SearXNG instance
| `http://172.17.0.1:18080`

| `MCP_SX_PORT`
| Port the bridge will listen on
| `3000`

| `MCP_SX_LOG`
| Log level (`trace`, `debug`, `info`, `warn`, `error`)
| `info`
|===

== Quick Start

1. **Start the Bridge**:
[source,bash]
----
export MCP_SX_URL="http://192.168.1.50:8080"
export MCP_SX_LOG="info"
./target/release/mcp-searxng-rs
----

2. **Setup Claude Desktop**:
Add the following to your `claude_desktop_config.json`:
[source,json]
----
{
  "mcpServers": {
    "searxng-network": {
      "command": "/path/to/mcp-searxng-rs",
      "env": {
        "MCP_SX_URL": "http://192.168.1.50:8080"
      }
    }
  }
}
----

== Project Structure

The codebase is highly modular, making it a perfect template for other MCP servers:

* `src/mcp.rs`: MCP Protocol structures and definitions.
* `src/state.rs`: Shared application state and environment config.
* `src/handlers/`: Tool-specific logic (e.g., SearXNG search logic).
* `src/error.rs`: Centralized error handling and Axum response mapping.

== Known Limitations

* **Broadcast Overkill**: Uses a global broadcast channel; every connected SSE client currently receives all search results (ideal for single-user local setups).
* **Stateless**: The bridge does not maintain search history; context is managed by the MCP client.
* **Security**: No built-in authentication layer. Use within a trusted network or behind a VPN.
* **Protocol Support**: Currently supports `initialize`, `tools/list`, and `tools/call`.

== License

MIT License. See `LICENSE` for the full text. Mentioning the author in credits is required.

---
Created with passion for the Rust and AI communities.
Parts of code generated by LLM
